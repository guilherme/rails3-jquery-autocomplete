!function(t){t.fn.railsAutocomplete=function(){return this.live("focus",function(){this.railsAutoCompleter||(this.railsAutoCompleter=new t.railsAutocomplete(this))})},t.railsAutocomplete=function(t){_e=t,this.init(_e)},t.railsAutocomplete.fn=t.railsAutocomplete.prototype={railsAutocomplete:"0.0.1"},t.railsAutocomplete.fn.extend=t.railsAutocomplete.extend=t.extend,t.railsAutocomplete.fn.extend({init:function(e){function i(t){return t.split(e.delimiter)}function n(t){return i(t).pop().replace(/^\s+/,"")}e.delimiter=t(e).attr("data-delimiter")||null,e.min_length=t(e).attr("min-lenght")||2,t(e).autocomplete({source:function(i,a){t.getJSON(t(e).attr("data-autocomplete"),{term:n(i.term)},function(){t(arguments[0]).each(function(i,n){var a={};a[n.id]=n,t(e).data(a)}),a.apply(null,arguments)})},search:function(){var t=n(this.value);return t.length<e.min_length?!1:void 0},focus:function(){return!1},select:function(n,a){var l,r=i(this.value);if(r.pop(),r.push(a.item.value),null!=e.delimiter)r.push(""),this.value=r.join(e.delimiter);else if(this.value=r.join(""),t(this).attr("data-id-element")&&t(t(this).attr("data-id-element")).val(a.item.id),t(this).attr("data-update-elements")){var u=t(this).data(a.item.id.toString()),o=t.parseJSON(t(this).attr("data-update-elements"));for(var s in o)update_element=t(o[s]),l=update_element.is("input")?"val":"html",update_element[l](u[s])}var m=this.value;return t(this).bind("keyup.clearId",function(){t(this).val().trim()!=m.trim()&&(t(t(this).attr("data-id-element")).val(""),t(this).unbind("keyup.clearId"))}),t(this).trigger("railsAutocomplete.select",a),!1}})}}),t(document).ready(function(){t("input[data-autocomplete]").railsAutocomplete()})}(jQuery);